#summary Proposed code review process using subversion

= Introduction =

To help us coordinate our work we would like at least one person other than the writer to review each change before it is added to the trunk.

See the Source tab above for instructions on downloading the source. If you are not a member of this project please send the output of `svn diff` and a statement that you license the code to this project under the terms of the [http://www.apache.org/licenses/ Apache License 2.0] to googletransitdatafeed@googlegroups.com. If you are a member please use the following process to modify our code.

To make working with branches easier you should install http://mg.pov.lt/eazysvn/. Running `easy_install eazysvn` as root should do the trick.

==Setup your branch==

Make sure you are in the directory `trunk` and it is up to date. It is okay if you have already started making changes:
{{{
$ svn update
}}}

Create a branch for your change:
{{{
$ ezswitch --create -m '* Make new branch <username>-<change_name>' <username>-<change_name>
}}}

==Edit in your branch==

Make some changes and commit them to the branch. Repeat this step as many times as you like:
{{{
$ svn commit -m '* Fixed some typo'
}}}

Merge changes from the trunk into your working copy with:
{{{
$ ezmerge ALL trunk
}}}

~~==Edit in trunk==~~

_this doesn't seem to work_

Alternately may work in the trunk and copy your changes to the branch.
{{{
$ ezswitch trunk
$ svn update
}}}

To copy changes to the branch:
{{{
$ ezswitch <username>-<change_name>
$ svn commit -m '* Sync change to branch'
$ ezswitch trunk
$ ezmerge ALL <username>-<change_name>
}}}

==Request a review==

When you want someone to review your code make sure all your changes are commited in the branch and mail the branch name and revision to googletransitdatafeed@googlegroups.com. You may need to go back and make more changes to the branch.

==Commit change to the trunk==

When you are ready to merge your branch into the trunk make sure you have a clean updated trunk:
{{{
$ ezswitch trunk
$ svn revert -R .  # you _did_ commit all your changes into the branch, didn't you?
$ svn update
}}}

Merge and commit the changes in your branch, then delete the branch:
{{{
$ ezmerge ALL <username>-<change_name>
$ svn commit
$ svn rm https://googletransitdatafeed.googlecode.com/svn/branches/<username>-<change_name>
}}}

= Code Reviewer =

To review a change that was made as described above, you can run:
{{{
$ svn diff https://googletransitdatafeed.googlecode.com/svn/trunk
https://googletransitdatafeed.googlecode.com/svn/branches/(branch_name)
}}}

to see what the change modifies.

== Mac OS X ==

If you are on Mac OS X, you can use the [http://svn.collab.net/repos/svn/trunk/contrib/client-side/svn-viewdiff svn-viewdiff] script to see the differences in the change graphically (it wraps the FileMerge tool that comes with the Mac OS X developer tools).  Once you've installed the script somewhere on your path, run:

{{{
$ svn diff --diff-cmd=svn-viewdiff https://googletransitdatafeed.googlecode.com/svn/trunk
https://googletransitdatafeed.googlecode.com/svn/branches/(branch_name)
}}}

This will give you one FileMerge window for each changed file, showing the differences.

== Mailing Feedback ==

Respond to the review request email, being sure to cc `googletransitdatafeed@googlegroups.com` so that others can benefit from the feedback as well.  Once the change is close enough to be acceptable for submission, mention that the change "looks good to me" or is "OK to submit" so that it's clear that you approve.





